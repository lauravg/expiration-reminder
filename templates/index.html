{% extends 'base.html' %}

{% block head %}

{% endblock %}

{% block body %}
{% if show_alert %}
{% endif %}

<div class="content">
    <h1>Product list</h1>
    {% if products|length < 1 %} <h4>There are no products. Create one below!</h4>
        {% else %}
        <table>
            <tr>
                <th>Name</th>
                <th>Expiration Date</th>
                <th>Creation Date</th>
                <th>Status</th>
            </tr>
            {% for product in products %}
            <tr>
                <td class="product-name">{{ product.product_name }}</td>
                <td class="expiration-date">{{ product.expiration_date }}</td>
                <td class="creation-date">{{ product.date_created.strftime('%Y-%m-%d') }}</td>
                <td class="wasted-status" data-product-id="{{ product.id }}"></td>
                <td>
                    <button class="update-button" data-product-id="{{ product.id }}">Update</button>
                    <button class="delete-button" data-product-id="{{ product.id }}">Delete</button>
                    <button class="waste-button" data-product-id="{{ product.id }}">Waste Product</button>
                </td>
                
            </tr>
            {% endfor %}
        </table>
        {% endif %}
        <a href="/wasted_product_list">Wasted Products</a>

        <form action="/" method="POST" id="myForm">
            <input type="text" name="product-name" id="input-product-name" placeholder="Product Name">
            <input type="date" name="expiration-date" id="input-expiration-date" value="{{ current_date }}">
            <input type="text" name="barcode-number" id="input-barcode-number" placeholder="Barcode Number">
            <button type="submit" id="submit-button">Submit</button>
            <button type="button" id="scan-barcode">Scan Barcode</button>
            <div id="barcode-scanner" class="closed">
                <div id="reader"></div>
                <div id="result"></div>
            </div>
        </form>
</div>

    
{% endblock %}